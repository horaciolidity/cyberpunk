<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>LYTHOS BOTS - Terminal</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container on">
    <div class="screen">
      <h3 class="title">CONEXI√ìN ESTABLECIDA</h3>
      <div class="box--outer">
        <div class="box">
          <div class="box--inner">
            <div class="content">
              <div class="holder">
                <b>‚ö° Bienvenido a LYTHOS IA BOTS ‚ö°</b>
                <p>üõ†Ô∏è <strong>Protocolo de acceso:</strong> Con√©ctate a la DApp utilizando la red <span style="color: red;">Optimism</span> üåêüî¥.</p>
                <p>üöÄ <strong>Estado del sistema:</strong> Listo para desplegar bots y generar USDT sin l√≠mites.</p>
                
                <p>ü§ñ <strong>Tu protocolo:</strong> Activar bots IA y maximizar flujos de USDT.</p>
                <p>‚ö° <strong>Tu algoritmo:</strong> Operaciones optimizadas en la blockchain de Optimism.</p>
                <p>üöÄ <strong>Resultado:</strong> Rendimientos exponenciales, ingresos sin fricci√≥n.</p>
                
                <div class="row">
                  <div class="col col__left label">Clase</div>
                </div>
                
                <div class="row">
                  <button id="lythosBotBtn" class="tron-button" onclick="window.location.href='menu.html'">
                    Ir a Lythos Bot GPT
                  </button>
                </div>
                
                <br>
                <div class="subscription">
                  <h4>√önete a la Alianza</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>

          <script src="mascota.js"></script> 

  <script>
   // Datos de la red Optimism
    const optimismConfig = {
      chainId: '0xa', // ID de la red Optimism (decimal 10, hexadecimal 0xa)
      chainName: 'Optimism',
      nativeCurrency: {
        name: 'Ether',
        symbol: 'ETH',
        decimals: 18
      },
      rpcUrls: ['https://mainnet.optimism.io'], // RPC p√∫blico de Optimism
      blockExplorerUrls: ['https://explorer.optimism.io']
    };

    // Funci√≥n para cambiar a Optimism o agregar la red
    async function switchToOptimism() {
      try {
        // Solicitar cambio a la red Optimism
        await window.ethereum.request({
          method: 'wallet_switchEthereumChain',
          params: [{ chainId: optimismConfig.chainId }]
        });
        console.log("Conectado a Optimism");
      } catch (error) {
        if (error.code === 4902) {
          // Si la red no est√° configurada, agregarla
          try {
            await window.ethereum.request({
              method: 'wallet_addEthereumChain',
              params: [optimismConfig]
            });
            console.log("Red Optimism agregada y seleccionada.");
          } catch (addError) {
            console.error("Error al agregar la red Optimism:", addError);
          }
        } else {
          console.error("Error al cambiar a Optimism:", error);
        }
      }
    }

    // Conectar MetaMask y redirigir al dashboard
    async function connectToWeb3() {
      if (window.ethereum) {
        try {
          // Cambiar o agregar la red Optimism
          await switchToOptimism();

          // Solicitar acceso a cuentas
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          const userAddress = accounts[0];
          console.log("Conexi√≥n exitosa. Direcci√≥n:", userAddress);

          // Guardar la direcci√≥n del usuario en localStorage para uso posterior
          localStorage.setItem("userAddress", userAddress);

          // Redirigir a la p√°gina del dashboard
          window.location.href = "menu.html";
        } catch (error) {
          console.error("Error al conectar con MetaMask:", error);
          alert("Error al conectar con MetaMask. Por favor, int√©ntalo nuevamente.");
        }
      } else {
        alert("No se detect√≥ MetaMask. Por favor, instala MetaMask para continuar.");
      }
    }

    // Asignar la funci√≥n al bot√≥n
    document.getElementById("web3connect").addEventListener("click", connectToWeb3);

    // Comprobar si ya hay una conexi√≥n activa (opcional)
    window.addEventListener("load", async () => {
      if (window.ethereum) {
        const accounts = await window.ethereum.request({ method: 'eth_accounts' });
        if (accounts.length > 0) {
          console.log("Usuario ya conectado. Direcci√≥n:", accounts[0]);
          localStorage.setItem("userAddress", accounts[0]);
        }
      }
    });
  </script>
</body>

</html>
