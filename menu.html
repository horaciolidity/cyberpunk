<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kairos Bots</title>
  <link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.0/dist/ethers.umd.min.js"></script>


  <style>
    @import url(https://fonts.googleapis.com/css?family=Share+Tech+Mono);

    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-y: scroll;
      font-family: 'Share Tech Mono', monospace;
      color: #db0e15;
      font-size: 14px; /* Reducida */
      background: url(https://image.ibb.co/h2hLAJ/bg.png) #000;
    }

    .header {
      text-align: center;
      font-size: 1.5em;
      margin: 10px 0;
      color: #22edfc;
      text-shadow: 0 0 10px #22edfc;
    }

    .container {
      position: relative;
      margin: 0 auto;
      width: 90%;
      max-width: 1080px;
      text-align: center;
    }

    .bot-card {
      background-color: #222;
      margin-bottom: 20px; /* Reducido */
      padding: 10px; /* Reducido */
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      color: #40E0D0; /* Color turquesa */

    }

    .bot-card h3 {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .bot-card p {
      margin: 5px 0;
    }

    .tradingview-widget {
      margin: 5px 0; /* Reducido */
      width: 100%;
      height: 200px; /* Reducido */
      border: 2px solid #22edfc;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
    }

    .button {
      margin: 5px; /* Reducido */
      padding: 5px 10px; /* Reducido */
      background: #db0e15;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 0.9em; /* Reducido */
      border-radius: 5px;
    }

    .button:hover {
      background: #b20812;
    }

    .theme-button {
      margin-top: 10px; /* Reducido */
      padding: 5px 10px; /* Reducido */
      background: #22edfc;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 0.9em; /* Reducido */
      border-radius: 5px;
    }

    .theme-button:hover {
      background: #1cc0d3;
    }

     .guide {
  position: absolute;
  width: 40px; /* Reducir el ancho */
  height: 2px;
  right: 0; /* Mover al borde derecho */
  background-color: transparent;
  z-index: 10;
  animation: blink 1s infinite;
}

   .guide.red {
  background-color: red;
  animation: blinkRed 1s infinite, flashGreen 5s infinite;
}

@keyframes flashGreen {
  0%, 90% { box-shadow: none; }
  91%, 100% { box-shadow: 0 0 15px green; }
}
  .status {
  display: flex;
  align-items: center;
  margin: 10px auto; /* Centra el elemento horizontalmente */
  justify-content: center;
  border: 1px solid #22edfc; /* Borde decorativo */
  padding: 5px;
  border-radius: 5px;
  width: 30%; /* Ancho m치s angosto, ajusta este valor seg칰n lo que necesites */
  max-width: 300px; /* Limita el ancho m치ximo */
  box-sizing: border-box; /* Asegura que el padding no aumente el ancho total */
}


.status-label {
  font-size: 1em;
  color: #db0e15;
  margin-right: 10px;
}

.status-indicator {
  width: 10px;
  height: 10px;
  background-color: red;
  border-radius: 50%;
  box-shadow: 0 0 10px red;
}
/* Linternas */
.lantern {
  position: absolute;
  top: 10px;
  width: 10px; /* Reducido a la mitad */
  height: 10px; /* Reducido a la mitad */
  border-radius: 50%;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); /* Ajustado para el nuevo tama침o */
}

.lantern.red {
  background-color: darkred;
  right: 50px;
}

.lantern.green {
  background-color: darkgreen;
  right: 20px;
}

/* Animaciones */
.active.red {
  animation: blink-red 1s infinite;
}

.active.green {
  animation: blink-green 1s infinite;
}

@keyframes blink-red {
  0%, 50% {
    background-color: red;
    box-shadow: 0 0 7.5px red; /* Ajustado para el tama침o reducido */
  }
  51%, 100% {
    background-color: darkred;
    box-shadow: none;
  }
}

@keyframes blink-green {
  0%, 50% {
    background-color: green;
    box-shadow: 0 0 7.5px green; /* Ajustado para el tama침o reducido */
  }
  51%, 100% {
    background-color: darkgreen;
    box-shadow: none;
  }
}
    /* New section for the header and referal stats */
    .referal-stats {
      margin-top: 20px;
      display: flex;
      justify-content: space-around;
      color: #22edfc;
    }

    .referal-box {
      background-color: #333;
      padding: 10px;
      border-radius: 5px;
      width: 25%;
    }

    .referal-box h4 {
      font-size: 1.1em;
      margin-bottom: 10px;
    }

    .referal-box p {
      font-size: 0.9em;
    }

    .referal-button {
      margin-top: 10px;
      padding: 5px 10px;
      background: #22edfc;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 0.9em;
      border-radius: 5px;
    }

    .referal-button:hover {
      background: #1cc0d3;
    }
.container {
      margin-top: 20px;
    }
    .info-box {
      background-color: #1e1e1e;
      padding: 20px;
      margin: 10px auto;
      border-radius: 10px;
      max-width: 500px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      color: #40E0D0; /* Color turquesa */

    }
    .info-box h3 {
      margin: 0 0 10px;
    }
    .info-box p {
      margin: 5px 0;
    }
  </style>
</head>
<body class="dark-theme">
  <div class="header">Selecciona el bot de trading que ma se ajuste a ti</div>

  <div class="container">
    <h1>Retiros habilitados 24hs solo por red Optimism </h1>

   
  <div class="container">
    <div class="info-box">
      <h3>Direcci칩n Conectada:</h3>
      <p id="account">Conectando...</p>
    </div>
    <div class="info-box">
      <h3>Saldo en ETH:</h3>
      <p id="balanceEth">Cargando...</p>
    </div>
    <div class="info-box">
      <h3>Saldo en USDT:</h3>
      <p id="balanceUsdt">Cargando...</p>
    </div>
      <button class="button" onclick="transfer()">Transferir</button>
    </div>
  <!-- Referal Stats Section -->
    <div class="referal-stats">
      <div class="referal-box">
        <h4>Contador de Referidos</h4>
        <p>Referidos: 10</p>
      </div>
      <div class="referal-box">
        <h4>Saldo de Referido</h4>
        <p>$50</p>
        <button class="referal-button" onclick="claimReferralRewards()">Cobrar Referidos</button>
      </div>
    </div>
<button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>

    <!-- Bot 1 -->
<div class="bot-card" data-bot-id="0">
      <h3>Bot 1 - BTC/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 2% diario | Congelamiento: 30 d칤as | Fee de Retiro: 5,7%</p>
      <p>1. Quantum Spectre: 50 USDT </p>

      <div class="bot-info" data-bot-id="0">
  <p><strong>Saldo:</strong> <span id="userBalance0">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards0">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee0">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim0">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice0">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance0">Cargando...</span> USDT</p>
</div>

     
      <div class="tradingview-widget">
         <div class="lantern red"></div>
  <div class="lantern green"></div>
           <div id="red-guide-1" class="guide red"><span></span></div>

        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:BTCUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
      </div>
     <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="0" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
       <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

  <button class="button danger" onclick="withdraw(0)">Retirar</button>
  <button class="button info" onclick="showUserDetails(0)">游닇 Ver Detalles</button>

  
  <button class="button info" onclick="showDetails(1)">游닇 Detalles del Bot</button>
       
  <button class="button info" onclick="analyzePerformance(1)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(1)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(1)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(1)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>

    </div>

    <!-- Bot 2 -->
<div class="bot-card" data-bot-id="1">
      <h3>Bot 2 - BTC/ETH</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 4% diario | Congelamiento: 15 d칤as | Fee de Retiro: 11,6%</p>
      <p>M치ximo para alquilar: $200</p>

<div class="bot-info" data-bot-id="1">
  <p><strong>Saldo:</strong> <span id="userBalance1">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards1">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee1">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim1">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice1">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance1">Cargando...</span> USDT</p>
</div>

      
      <div class="tradingview-widget">
        <div class="lantern red"></div>
  <div class="lantern green"></div>
          <div id="red-guide-1" class="guide red"><span></span></div>

        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:ETHUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

     <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="1" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
       <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

  <button class="button danger" onclick="withdraw(1)">Retirar</button>
  <button class="button info" onclick="showUserDetails(0)">游닇 Ver Detalles</button>

  
  <button class="button info" onclick="showDetails(1)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(1)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(1)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(1)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(1)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>
    </div>


    <!-- Bot 3 -->
<div class="bot-card" data-bot-id="2">
      <h3>Bot 3 - BCH/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 12% diario | Congelamiento: 10 d칤as | Fee de Retiro: 8,3%</p>
      <p>M칤nimo para alquilar: $3000</p>

      <div class="bot-info" data-bot-id="2">
  <p><strong>Saldo:</strong> <span id="userBalance2">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards2">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee2">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim2">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice2">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance2">Cargando...</span> USDT</p>
</div>

      <div class="tradingview-widget">
         <div class="lantern red"></div>
  <div class="lantern green"></div>
    <div id="red-guide-1" class="guide red"><span></span></div>
        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:BCHUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

   <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="2" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
     <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

  <button class="button danger" onclick="withdraw(2)">Retirar</button>
  <button class="button info" onclick="showUserDetails(2)">游닇 Ver Detalles</button>

  
  <button class="button info" onclick="showDetails(2)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(2)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(2)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(2)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(2)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(2)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards(2)">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(2)">游닋 Exportar Reporte</button>
</div>

    </div>

          <!-- Bot 3 -->
<div class="bot-card" data-bot-id="3">
      <h3>Bot 4 - WLD/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 12% diario | Congelamiento: 10 d칤as | Fee de Retiro: 8,3%</p>
      <p>M칤nimo para alquilar: $3000</p>
      <div class="bot-info" data-bot-id="3">
  <p><strong>Saldo:</strong> <span id="userBalance3">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards3">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee3">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim3">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice3">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance3">Cargando...</span> USDT</p>
</div>

      <div class="tradingview-widget">
       <div class="lantern red"></div>
  <div class="lantern green"></div>
    <div id="red-guide-1" class="guide red"><span></span></div>
        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:WLDUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

   <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="3" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
     <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

  <button class="button danger" onclick="withdraw(3)">Retirar</button>
  <button class="button info" onclick="showUserDetails(3)">游닇 Ver Detalles</button>

  
  <button class="button info" onclick="showDetails(3)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(3)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(3)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(3)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(3)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>

    </div>

          <!-- Bot 3 -->
<div class="bot-card" data-bot-id="4">
      <h3>Bot 5 - DOGE/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 12% diario | Congelamiento: 10 d칤as | Fee de Retiro: 8,3%</p>
      <p>M칤nimo para alquilar: $3000</p>

   <div class="bot-info" data-bot-id="4">
  <p><strong>Saldo:</strong> <span id="userBalance4">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards4">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee4">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim4">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice4">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance4">Cargando...</span> USDT</p>
</div>

      <div class="tradingview-widget">
        <div class="lantern red"></div>
  <div class="lantern green"></div>
    <div id="red-guide-1" class="guide red"><span></span></div>
        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:DOGEUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

   <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="4" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
     <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

  <button class="button danger" onclick="withdraw(4)">Retirar</button>
  <button class="button info" onclick="showUserDetails(0)">游닇 Ver Detalles</button>

  <button class="button info" onclick="showDetails(4)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(1)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(1)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(1)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(1)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>
    </div>


          <!-- Bot 3 -->
<div class="bot-card" data-bot-id="5">
      <h3>Bot 6 - ENA/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 12% diario | Congelamiento: 10 d칤as | Fee de Retiro: 8,3%</p>
      <p>M칤nimo para alquilar: $3000</p>
     <div class="bot-info" data-bot-id="5">
  <p><strong>Saldo:</strong> <span id="userBalance5">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards5">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee5">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim5">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice5">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance5">Cargando...</span> USDT</p>
</div>

      <div class="tradingview-widget">
        <div class="lantern red"></div>
  <div class="lantern green"></div>
    <div id="red-guide-1" class="guide red"><span></span></div>
        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:ENAUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

   <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="5" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
     <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

     <button class="button danger" onclick="withdraw(5)">Retirar</button>
     <button class="button info" onclick="showUserDetails(5)">游닇 Ver Detalles</button>

  <button class="button info" onclick="showDetails(5)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(1)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(1)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(1)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(1)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>
    </div>

          <!-- Bot 3 -->
<div class="bot-card" data-bot-id="6">
      <h3>Bot 7 - COW/USDT</h3>
      <div class="status">
  <span class="status-label">Bot inactivo</span>
  <span class="status-indicator"></span>
</div>

      <p>Profit: 12% diario | Congelamiento: 10 d칤as | Fee de Retiro: 8,3%</p>
      <p>M칤nimo para alquilar: $3000</p>
      <div class="bot-info" data-bot-id="6">
  <p><strong>Saldo:</strong> <span id="userBalance0">Cargando...</span> USDT</p>
  <p><strong>Recompensas Pendientes:</strong> <span id="pendingRewards6">Cargando...</span> USDT</p>
  <p><strong>Fee de Retiro:</strong> <span id="withdrawalFee6">Cargando...</span>%</p>
  <p><strong>Tiempo para Reclamar:</strong> <span id="timeUntilClaim6">Cargando...</span></p>
  <p><strong>Aviso:</strong> <span id="claimNotice6">Cargando...</span></p>
  <p><strong>Saldo Total:</strong> <span id="userTotalBalance6">Cargando...</span> USDT</p>
</div>

      <div class="tradingview-widget">
         <div class="lantern red"></div>
  <div class="lantern green"></div>
    <div id="red-guide-1" class="guide red"><span></span></div>
        <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:COWUSDT&interval=5&theme=dark&style=1&locale=es&toolbar_bg=%23f1f3f6&hide_top_toolbar=true&hide_legend=true" 
                width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
        </div>

   <div class="button-group">
<input type="number" class="usdtAmount" data-bot-id="6" placeholder="Cantidad en USDT">
  <button class="button primary">Comprar Bot</button>
     <button class="button success" onclick="claimRewards(botId)">游꾸 Reclamar Recompensas</button>

     <button class="button danger" onclick="withdraw(6)">Retirar</button>
     <button class="button info" onclick="showUserDetails(6)">游닇 Ver Detalles</button>

  <button class="button info" onclick="showDetails(6)">游닇 Detalles del Bot</button>
  <button class="button info" onclick="analyzePerformance(1)">游늳 Analizar Rendimiento</button>
  <button class="button primary" onclick="customizeBot(1)">丘뙖잺 Configuraci칩n Personalizada</button>
  <button class="button secondary" onclick="enableNotifications(1)">游댒 Activar Notificaciones</button>
  <button class="button info" onclick="viewHistory(1)">游닆 Historial de Transacciones</button>
  <button class="button info" onclick="compareBots()">游늵 Comparar Bots</button>
  <button class="button danger" onclick="switchBot(1)">游댃 Cambiar de Bot</button>
  <button class="button support" onclick="getTips()">游눠 Consejos de Trading</button>
  <button class="button success" onclick="claimRewards()">游꾸 Recompensas</button>
  <button class="button secondary" onclick="exportReport(1)">游닋 Exportar Reporte</button>
</div>
    </div>

    <!-- Botones de cambio de tema y soporte -->
    <button class="theme-button" onclick="changeTheme('dark')">Tema Oscuro</button>
    <button class="theme-button" onclick="changeTheme('light')">Tema Claro</button>
    <button class="button">Llamar a Soporte</button>
    <button class="button">Reclamar Recompensa</button>
  </div>
 
  <!-- Agrega m치s bots seg칰n sea necesario -->
</select>

  <script>
let web3;
let usdtContract;
let contract;
let userAddress;
let web3Ready = false; 

const usdtContractAddress = "0x94b008aA00579c1307B0EF2c499aD98a8ce58e58"; 
const contractAddress = "0x03FA055e3879a4bF1f4ca31F8A3a9012e8CcC79F";
    
const usdtABI = [
  {"inputs":[{"internalType":"address","name":"_l2Bridge","type":"address"},{"internalType":"address","name":"_l1Token","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},
  {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},
  {"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},
  {"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
  {
    "inputs": [
      { "internalType": "address", "name": "owner", "type": "address" },
      { "internalType": "address", "name": "spender", "type": "address" }
    ],
    "name": "allowance",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  }
];

const contractABI =[{"inputs":[{"internalType":"address","name":"_usdt","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"newInterestRate","type":"uint256"}],"name":"BotInterestUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"newPrice","type":"uint256"}],"name":"BotPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newBalance","type":"uint256"}],"name":"BotPurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"FeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"GlobalWithdrawalsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"KyoKusanagiDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RewardAssigned","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newInterval","type":"uint256"}],"name":"RewardIntervalUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"RewardPermissionUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RewardsClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"USDTWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"remainingBalance","type":"uint256"}],"name":"Withdrawal","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"WithdrawalPermissionUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint8","name":"botId","type":"uint8"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"WithdrawalStatusUpdated","type":"event"},{"inputs":[{"internalType":"uint8","name":"","type":"uint8"}],"name":"bots","outputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"interestRate","type":"uint256"},{"internalType":"uint256","name":"withdrawalFee","type":"uint256"},{"internalType":"uint256","name":"totalRewards","type":"uint256"},{"internalType":"bool","name":"withdrawalsEnabled","type":"bool"},{"internalType":"uint256","name":"lastRewardTime","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"calculateWithdrawalFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"getPendingReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"getTimeUntilNextClaim","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"getTotalRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"getUserBotBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"kyoKusanagiDeposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"lastRewardClaim","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"purchaseBot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardInterval","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardsAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint8","name":"botId","type":"uint8"}],"name":"setRewardForUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newInterval","type":"uint256"}],"name":"setRewardInterval","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"enabled","type":"bool"}],"name":"toggleAllBotWithdrawals","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"toggleUserRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"toggleUserWithdrawal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"toggleWithdrawalStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalFeesAccumulated","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"newInterestRate","type":"uint256"}],"name":"updateBotInterest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"newPrice","type":"uint256"}],"name":"updateBotPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"updateWithdrawalFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"usdt","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"useAccumulatedFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"userBotBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"userRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"botId","type":"uint8"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdrawBotBalance","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdrawUSDT","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"withdrawalsAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}];


async function initializeWeb3() {
  if (typeof window.ethereum !== "undefined") {
    try {
      // Inicializar Web3
      web3 = new Web3(window.ethereum);

      // Cambiar a la red Optimism
      await window.ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: "0xa" }] // Chain ID para Optimism
      });

      // Solicitar cuentas a MetaMask
      const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
      const account = accounts[0];
      if (!account) {
        throw new Error("No se pudo obtener la cuenta de MetaMask.");
      }

      // Guardar la direcci칩n del usuario globalmente
      userAddress = account;

      // Mostrar la direcci칩n conectada
      document.getElementById("account").textContent = userAddress;

      // Obtener y mostrar el saldo en ETH
      const ethBalance = await web3.eth.getBalance(userAddress);
      document.getElementById("balanceEth").textContent = `${web3.utils.fromWei(ethBalance, "ether")} ETH`;

      // Inicializar el contrato de USDT
      usdtContract = new web3.eth.Contract(usdtABI, usdtContractAddress);

      // Obtener y mostrar el saldo en USDT
      const usdtBalance = await usdtContract.methods.balanceOf(userAddress).call();
      const usdtBalanceFormatted = (Number(usdtBalance) / 1e6).toFixed(2); // USDT tiene 6 decimales
      document.getElementById("balanceUsdt").textContent = `${usdtBalanceFormatted} USDT`;

      // Inicializar el contrato principal
      contract = new web3.eth.Contract(contractABI, contractAddress);
      web3Ready = true;


      for (let botId = 0; botId <= 6; botId++) {
      await updateBotInfo(botId, userAddress);
    }


      // Confirmar conexi칩n en la consola
      console.log("Conexi칩n establecida correctamente:");
      console.log("Cuenta conectada:", userAddress);
      console.log("Saldo en ETH:", web3.utils.fromWei(ethBalance, "ether"), "ETH");
      console.log("Saldo en USDT:", usdtBalanceFormatted, "USDT");
      
      updateAllBots();


      // Notificar 칠xito al usuario
      alert("Conexi칩n exitosa a MetaMask y la red Optimism.");
    } catch (error) {
      console.error("Error al conectar a MetaMask o cambiar de red:", error);
      alert("Error al conectar a MetaMask o cambiar de red. Revisa la consola para m치s detalles.");
    }
  } else {
    alert("MetaMask no est치 instalado. Por favor, inst치lalo para continuar.");
  }
}

// Iniciar al cargar la p치gina
window.addEventListener("load", initializeWeb3);


async function purchaseBot(event) {
  try {
    // Obtener la direcci칩n del usuario conectado
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];
    if (!userAddress) {
      alert("No se pudo obtener la cuenta de usuario conectada. Intenta reconectar MetaMask.");
      return;
    }

    // Obtener la tarjeta del bot correspondiente al bot칩n presionado
    const botCard = event.target.closest(".bot-card");
    if (!botCard) {
      alert("Error: No se pudo determinar el bot seleccionado.");
      return;
    }

    // Extraer ID del bot y cantidad ingresada
    const botId = parseInt(botCard.querySelector(".usdtAmount").getAttribute("data-bot-id"));
    const amountInUsdt = parseFloat(botCard.querySelector(".usdtAmount").value);

    // Validaciones
    if (isNaN(botId) || botId < 0 || botId > 6) {
      alert("Error: El ID del bot no es v치lido.");
      return;
    }

    if (isNaN(amountInUsdt) || amountInUsdt <= 0) {
      alert("Por favor, ingresa una cantidad v치lida en USDT.");
      return;
    }

    // Convertir el monto a micro-unidades
    const amountInMicroUnits = BigInt(Math.floor(amountInUsdt * 10 ** 6));

    console.log(`Intentando comprar Bot ${botId} con ${amountInMicroUnits} micro-unidades.`);

    // Verificar saldo en USDT antes de continuar
    const userBalance = BigInt(await usdtContract.methods.balanceOf(userAddress).call());
    if (amountInMicroUnits > userBalance) {
      alert("Saldo insuficiente en USDT para completar la compra.");
      return;
    }

    // Confirmar compra con el usuario
    const confirmation = confirm(`Vas a comprar el Bot ${botId} con ${(Number(amountInMicroUnits) / 1e6).toFixed(2)} USDT. 쮻eseas continuar?`);
    if (!confirmation) {
      alert("Compra cancelada.");
      return;
    }

    // Aprobar la transferencia de USDT
    console.log("Solicitando aprobaci칩n de transferencia...");
    await usdtContract.methods.approve(contractAddress, amountInMicroUnits).send({ from: userAddress });
    console.log("Aprobaci칩n completada.");

    // Realizar la compra del bot
    console.log("Intentando realizar la compra...");
    const tx = await contract.methods.purchaseBot(botId, amountInMicroUnits).send({ from: userAddress });
    console.log("Compra exitosa:", tx);
    alert("춰Compra realizada con 칠xito!");

    // Actualizar la informaci칩n del bot despu칠s de la compra
    await updateBotInfo(botId, userAddress);
  } catch (error) {
    console.error("Error al comprar el bot:", error);

    // Identificar y manejar errores espec칤ficos
    if (error.code === 4001) {
      alert("Transacci칩n rechazada por el usuario.");
    } else if (error.message.includes("insufficient funds")) {
      alert("Fondos insuficientes para pagar la comisi칩n de la red.");
    } else if (error.message.includes("revert")) {
      alert("El contrato rechaz칩 la transacci칩n. Verifica las condiciones para comprar este bot.");
    } else {
      alert("Error durante la compra. Revisa la consola para m치s detalles.");
    }
  }
}

async function updateBotInfo(botId) {
  try {
    if (!web3Ready) {
      console.warn("Web3 no est치 listo. Esperando...");
      return;
    }

    // Obtener datos del contrato
    const userBalance = BigInt(await contract.methods.getUserBotBalance(userAddress, botId).call());
    const pendingRewards = BigInt(await contract.methods.getPendingReward(userAddress, botId).call());
    const withdrawalFee = BigInt(await contract.methods.calculateWithdrawalFee(botId, userBalance).call());
    const timeUntilNextClaim = BigInt(await contract.methods.getTimeUntilNextClaim(userAddress, botId).call());

    // Seleccionar la tarjeta del bot
    const botInfo = document.querySelector(`.bot-info[data-bot-id="${botId}"]`);
    if (!botInfo) {
      console.error(`No se encontr칩 la tarjeta del bot con ID ${botId}`);
      return;
    }

    // Actualizar los datos en el DOM
    botInfo.querySelector(`#userBalance${botId}`).textContent = (Number(userBalance) / 1e6).toFixed(2);
    botInfo.querySelector(`#pendingRewards${botId}`).textContent = (Number(pendingRewards) / 1e6).toFixed(2);
    botInfo.querySelector(`#withdrawalFee${botId}`).textContent = `${(Number(withdrawalFee) / 1e6).toFixed(2)}%`;
    botInfo.querySelector(`#timeUntilClaim${botId}`).textContent =
      Number(timeUntilNextClaim) > 0 ? `${Math.ceil(Number(timeUntilNextClaim) / 3600)} horas` : "Disponible";
    botInfo.querySelector(`#claimNotice${botId}`).textContent =
      pendingRewards > 0n && timeUntilNextClaim === 0n ? "춰Recompensa disponible!" : "No disponible";
    botInfo.querySelector(`#userTotalBalance${botId}`).textContent = ((Number(userBalance) + Number(pendingRewards)) / 1e6).toFixed(2);
  } catch (error) {
    console.error(`Error al actualizar el bot ${botId}:`, error);
  }
}

    
function simulateGuides() {
  const widgets = document.querySelectorAll('.tradingview-widget');
  widgets.forEach((widget, index) => {
    const containerHeight = widget.offsetHeight;
    const redGuide = document.getElementById(`red-guide-${index + 1}`); // Corregido con comillas invertidas

    setInterval(() => {
      moveGuide(redGuide, containerHeight, -3, 3);
    }, Math.random() * 3000 + 2000);
  });
}

  document.querySelectorAll('.tradingview-widget').forEach((widget, index) => {
    const redLantern = widget.querySelector('.lantern.red');
    const greenLantern = widget.querySelector('.lantern.green');

    setInterval(() => {
      const isActive = Math.random() > 0.5;
      if (isActive) {
        redLantern.classList.add('active');
        greenLantern.classList.remove('active');
      } else {
        redLantern.classList.remove('active');
        greenLantern.classList.add('active');
      }
    }, 2000);
  });

async function updateAllBots() {
  try {
    if (!web3Ready) {
      console.warn("Web3 no est치 listo. Esperando...");
      return; // Salir si Web3 no est치 listo
    }
    

    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];

    for (let botId = 0; botId <= 6; botId++) {
      await updateBotInfo(botId);


      const userBalance = (botDetails.userBalance / 1e6).toFixed(2);
      const pendingRewards = (botDetails.pendingRewards / 1e6).toFixed(2);
      const withdrawalFee = (botDetails.withdrawalFee / 1e6).toFixed(2);
      const timeUntilNextClaim = Math.ceil(botDetails.timeUntilNextClaim / 3600);
      const rewardsAvailable = botDetails.rewardsAvailable;
      const userTotalBalance = (botDetails.userTotalBalance / 1e6).toFixed(2);

      document.getElementById(`userBalance${botId}`).textContent = userBalance;
      document.getElementById(`pendingRewards${botId}`).textContent = pendingRewards;
      document.getElementById(`withdrawalFee${botId}`).textContent = `${withdrawalFee}%`;
      document.getElementById(`timeUntilClaim${botId}`).textContent =
        timeUntilNextClaim > 0 ? `${timeUntilNextClaim} horas` : "Disponible";
      document.getElementById(`claimNotice${botId}`).textContent = rewardsAvailable
        ? "춰Recompensa disponible!"
        : "No disponible";
      document.getElementById(`userTotalBalance${botId}`).textContent = userTotalBalance;

      console.log(`Bot ${botId}: Datos actualizados correctamente.`);
    }
  } catch (error) {
    console.error("Error al actualizar los datos de los bots:", error);
    alert("Hubo un error al obtener los datos de los bots. Revisa la consola para m치s detalles.");
  }
}


    async function claimRewards(botId) {
  try {
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];
    alert(`Reclamando recompensas del Bot ${botId}...`);
    const tx = await contract.methods.claimRewards(botId).send({ from: userAddress });
    alert("춰Recompensas reclamadas exitosamente!");
    console.log("Detalles de la transacci칩n:", tx);
    await updateBotInfo(botId, userAddress);
  } catch (error) {
    console.error("Error al reclamar recompensas:", error);
    alert("Error al reclamar recompensas. Intenta nuevamente.");
  }
}



document.querySelectorAll(".button.primary").forEach(button => {
    button.addEventListener("click", async (event) => {
        try {
            const botCard = event.target.closest(".bot-card");
            if (!botCard) {
                alert("Error: No se pudo determinar el bot seleccionado.");
                return;
            }

            // Obtener el `botId` y la cantidad en USDT
            const botId = parseInt(botCard.querySelector(".usdtAmount").getAttribute("data-bot-id"));
            const amountInUsdt = parseFloat(botCard.querySelector(".usdtAmount").value);

            if (isNaN(botId)) {
                alert("Error: El ID del bot no es v치lido.");
                return;
            }

            if (isNaN(amountInUsdt) || amountInUsdt <= 0) {
                alert("Por favor, ingresa una cantidad v치lida en USDT.");
                return;
            }

            const amountInMicroUnits = amountInUsdt * 10 ** 6;
            console.log(`Intentando comprar Bot ${botId} con ${amountInMicroUnits} micro-unidades.`);

            // Aprobar la transferencia de USDT
            console.log("Solicitando aprobaci칩n de transferencia...");
            await usdtContract.methods.approve(contractAddress, amountInMicroUnits).send({ from: userAddress });
            console.log("Aprobaci칩n completada.");

            // Realizar la compra del bot
            console.log("Intentando realizar la compra...");
            const tx = await contract.methods.purchaseBot(botId, amountInMicroUnits).send({ from: userAddress });
            alert("춰Compra exitosa!");
            console.log("Detalles de la transacci칩n:", tx);
        } catch (error) {
            console.error("Error al comprar el bot:", error);
            alert("Error durante la compra. Por favor, verifica tu saldo y vuelve a intentar.");
        }
    });
});

async function showUserDetails(botId) {
  try {
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];

    if (!userAddress) {
      alert("No se pudo obtener la cuenta conectada. Aseg칰rate de estar conectado a MetaMask.");
      return;
    }

    // Obtener datos del usuario y bot desde el contrato
    const userBalance = await contract.methods.getUserBotBalance(userAddress, botId).call();
    const pendingRewards = await contract.methods.getPendingReward(userAddress, botId).call();
    const botDetails = await contract.methods.bots(botId).call();

    // Calcular el porcentaje de ganancia
    const balance = parseFloat(userBalance) / 1e6;
    const rewards = parseFloat(pendingRewards) / 1e6;
    const profitPercentage = rewards > 0 ? ((rewards / balance) * 100).toFixed(2) : 0;

    // Mostrar los detalles en un modal o alerta
    alert(`
      Detalles del Bot ${botId}:
      - Saldo: ${balance.toFixed(2)} USDT
      - Recompensas Pendientes: ${rewards.toFixed(2)} USDT
      - Porcentaje de Ganancia: ${profitPercentage}%
      - Inter칠s Diario: ${(botDetails.interestRate / 100).toFixed(2)}%
      - Retiros Habilitados: ${botDetails.withdrawalsEnabled ? "S칤" : "No"}
    `);
  } catch (error) {
    console.error("Error al obtener detalles del bot:", error);
    alert("No se pudieron obtener los detalles del bot. Intenta nuevamente.");
  }
}




async function withdraw(botId) {
  try {
    // Solicitar al usuario la cantidad de USDT para retirar
    const amount = prompt("Ingresa la cantidad de USDT para retirar:");
    if (!amount || isNaN(amount) || Number(amount) <= 0) {
      alert("Por favor, ingresa una cantidad v치lida para retirar.");
      return;
    }

    // Convertir el monto a micro-unidades (BigInt para evitar errores de precisi칩n)
    const amountInMicroUnits = BigInt(Math.floor(Number(amount) * 10 ** 6));

    // Obtener la direcci칩n del usuario conectado
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];
    if (!userAddress) {
      alert("No se pudo obtener la cuenta conectada. Aseg칰rate de estar conectado a MetaMask.");
      return;
    }

    // Verificar el saldo del usuario en el bot
    const userBalance = BigInt(await contract.methods.getUserBotBalance(userAddress, botId).call());
    if (amountInMicroUnits > userBalance) {
      alert("Saldo insuficiente para retirar la cantidad solicitada.");
      return;
    }

    // Confirmar retiro con el usuario
    const confirmation = confirm(`Vas a retirar ${(Number(amountInMicroUnits) / 1e6).toFixed(2)} USDT del Bot ${botId}. 쮻eseas continuar?`);
    if (!confirmation) {
      alert("Operaci칩n cancelada.");
      return;
    }

    // Realizar el retiro
    alert("Realizando el retiro...");
    const tx = await contract.methods.withdrawBotBalance(botId, amountInMicroUnits).send({ from: userAddress });

    // Notificar 칠xito al usuario
    alert("춰Retiro exitoso!");
    console.log("Detalles de la transacci칩n:", tx);

    // Actualizar la informaci칩n del bot
    await updateBotInfo(botId, userAddress);
  } catch (error) {
    console.error("Error al retirar fondos:", error);

    // Identificar posibles errores
    if (error.code === 4001) {
      alert("Operaci칩n cancelada por el usuario.");
    } else if (error.message.includes("revert")) {
      alert("El contrato rechaz칩 la transacci칩n. Verifica las condiciones para retirar.");
    } else {
      alert("Ocurri칩 un error inesperado. Consulta la consola para m치s detalles.");
    }
  }
}

async function analyzePerformance(botId) {
  try {
    // Asegurarte de que se obtiene la direcci칩n del usuario
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];

    if (!userAddress) {
      alert("No se pudo obtener la cuenta conectada. Aseg칰rate de estar conectado a MetaMask.");
      return;
    }

    // Obtener detalles del bot desde el contrato
    const botBalance = BigInt(await contract.methods.getUserBotBalance(userAddress, botId).call());
    const pendingRewards = BigInt(await contract.methods.getPendingReward(userAddress).call());
    const lastClaim = BigInt(await contract.methods.lastRewardClaim(userAddress).call());
    const bot = await contract.methods.bots(botId).call();

    // Convertir valores BigInt a Number para su manejo
    const balanceFormatted = Number(botBalance) / 1e6;
    const rewardsFormatted = Number(pendingRewards) / 1e6;
    const lastClaimDate = new Date(Number(lastClaim) * 1000).toLocaleString();

    // Mostrar los datos en la interfaz
    alert(`
      Rendimiento del Bot ${botId}:
      - Saldo: ${balanceFormatted.toFixed(2)} USDT
      - Recompensas Pendientes: ${rewardsFormatted.toFixed(2)} USDT
      - 칔ltima Fecha de Reclamo: ${lastClaimDate}
      - Inter칠s: ${(Number(bot.interestRate) / 100).toFixed(2)}%
      - Retiros Habilitados: ${bot.withdrawalsEnabled ? "S칤" : "No"}
    `);
  } catch (error) {
    console.error("Error al analizar el rendimiento:", error);

    // Identificar posibles errores
    if (error.message.includes("Cannot mix BigInt")) {
      alert("Hubo un problema al procesar valores del contrato. Aseg칰rate de estar conectado correctamente.");
    } else {
      alert("Hubo un problema al intentar analizar el rendimiento. Revisa la consola para m치s detalles.");
    }
  }
}

    async function viewHistory(botId) {
  try {
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];

    // Obtener eventos del contrato relacionados con el usuario
    const pastEvents = await contract.getPastEvents("allEvents", {
      filter: { user: userAddress },
      fromBlock: 0, // Cambiar por el bloque de despliegue del contrato para optimizar
      toBlock: "latest"
    });

    // Filtrar eventos espec칤ficos relacionados con el botId
    const botEvents = pastEvents.filter(event => {
      return event.returnValues.botId == botId;
    });

    if (botEvents.length === 0) {
      alert(`No hay transacciones registradas para el Bot ${botId}.`);
      return;
    }

    // Formatear el historial
    const history = botEvents.map(event => {
      const eventType = event.event;
      const amount = (event.returnValues.amount / 1e6).toFixed(2);
      const timestamp = new Date(event.returnValues.timestamp * 1000).toLocaleString();
      return `${timestamp} - ${eventType}: ${amount} USDT`;
    }).join("\n");

    // Mostrar el historial
    alert(`Historial de Transacciones para el Bot ${botId}:\n\n${history}`);
  } catch (error) {
    console.error("Error al ver el historial:", error);
    alert("Hubo un problema al intentar obtener el historial de transacciones.");
  }
}


async function claimRewards() {
  try {
    const accounts = await web3.eth.getAccounts();
    const userAddress = accounts[0];

    alert("Reclamando recompensas...");
    const tx = await contract.methods.claimRewards().send({ from: userAddress });

    alert("춰Recompensas reclamadas exitosamente!");
    console.log("Detalles de la transacci칩n:", tx);
  } catch (error) {
    console.error("Error al reclamar recompensas:", error);
    alert("No se pudieron reclamar las recompensas. Intenta nuevamente.");
  }
}
    document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".button.primary").forEach(button => {
    button.addEventListener("click", purchaseBot);
  });
});

  </script>
</body>
</html>
